---
import { getCollection } from 'astro:content'
import Layout from '../../layouts/default.astro'

// 1. Generate a new path for every collection entry
export async function getStaticPaths() {
  const blogEntries = await getCollection('blog')
  return blogEntries.map((entry) => ({
    params: { slug: entry.slug },
    props: { entry }
  }))
}

// 2. When it's time to render, you can get the entry directly from the prop
const { entry } = Astro.props
const { Content } = await entry.render()
---

<Layout title={entry.data.title} description={entry.data.description}>
  <div class="relative h-96">
    <img src={entry.data.image} class="w-full h-full object-cover" />
  </div>

  <div
    class="max-w-4xl mx-auto bg-white py-12 px-12 lg:px-24 -mt-32 relative z-10">
    <h2 class="mt-4 uppercase tracking-widest text-xs text-gray-600">
      {
        entry.data.date.toLocaleString('en-AU', {
          dateStyle: 'long',
          timeZone: 'Australia/NSW'
        })
      }
    </h2>
    <h1 class="font-display text-2xl md:text-3xl text-gray-900 mt-4">
      {entry.data.title}
    </h1>

    <div class="prose prose-sm sm:prose lg:prose-lg mt-6">
      <Content />
    </div>
  </div>
</Layout>
